# Практика 8

## Контрольные вопросы

### 1. Какие преимущества предоставляют гибридные вычисления?

Гибридные вычисления объединяют различные типы вычислительных блоков (обычно CPU и GPU) для достижения более высокой производительности и эффективности. Основные преимущества:

* **Высокая производительность:** Использование GPU для массивных параллельных вычислений значительно ускоряет обработку данных по сравнению с использованием только CPU.
* **Энергоэффективность:** GPU часто обеспечивают лучшую производительность на ватт для параллельных задач.
* **Специализация:** CPU отлично справляется со сложной логикой и управлением, в то время как GPU берет на себя тяжелые вычислительные нагрузки, позволяя каждому компоненту делать то, что он делает лучше всего.

### 2. Как минимизировать накладные расходы при передаче данных между CPU и GPU?

Передача данных по шине PCIe часто является узким местом. Способы минимизации:

* **Минимизация объема передаваемых данных:** Передавать только необходимые данные и, по возможности, сохранять промежуточные результаты в памяти GPU.
* **Пакетная передача (Batching):** Объединять множество мелких передач в одну крупную, чтобы уменьшить накладные расходы на инициализацию транзакции.
* **Асинхронные передачи и Перекрытие (Overlapping):** Использовать CUDA Streams для одновременного выполнения вычислений и передачи данных, скрывая задержки копирования.
* **Pinned (Page-locked) Memory:** Использовать закрепленную память на хосте (`cudaHostAlloc`), что обеспечивает более высокую пропускную способность передачи данных по сравнению с обычной страничной памятью.
* **Unified Memory (Унифицированная память):** Упрощает программирование и может оптимизировать перемещение страниц драйвером по требованию (хотя требует аккуратного использования для производительности).

### 3. Какие задачи лучше выполнять на CPU, а какие — на GPU?

* **CPU (Central Processing Unit):**
  * Задачи со сложной логикой ветвления и управлением потоком.
  * Последовательные алгоритмы, которые плохо поддаются распараллеливанию.
  * Операции ввода-вывода (I/O), работа с файловой системой, сетевые взаимодействия.
  * Задачи, требующие низкой латентности (быстрого отклика) для одиночных операций.
* **GPU (Graphics Processing Unit):**
  * Задачи с высокой степенью параллелизма данных (SIMD/SIMT), где одна операция применяется ко множеству элементов.
  * Матричные вычисления, обработка изображений и видео, глубокое обучение.
  * Алгоритмы с высокой арифметической интенсивностью (отношение вычислений к доступу в память).

### 4. Как можно улучшить производительность гибридного приложения?

* **Профилирование:** Использовать инструменты (например, Nsight Systems, Nsight Compute) для выявления узких мест.
* **Балансировка нагрузки:** Равномерно распределять работу между CPU и GPU, чтобы избежать простоя одного из устройств.
* **Оптимизация работы с памятью GPU:** Обеспечить коалесцированный доступ к глобальной памяти (coalesced access), использовать разделяемую память (shared memory) для часто используемых данных, избегать конфликтов банков памяти.
* **Уменьшение дивергенции потоков:** Избегать условных переходов внутри варпов (warps), которые заставляют потоки простаивать.
* **Параллелизм уровней:** Использовать Streams для параллельного выполнения нескольких ядер (kernels) и передач данных.
